<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skill Extraction Debug Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
        textarea { width: 100%; height: 200px; margin: 10px 0; }
        button { padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .results { background: #f8f9fa; padding: 15px; border-radius: 4px; margin: 10px 0; }
        .skill-list { display: flex; flex-wrap: wrap; gap: 5px; margin: 10px 0; }
        .skill-tag { background: #e9ecef; padding: 4px 8px; border-radius: 4px; font-size: 12px; }
        .found { background: #d4edda; color: #155724; }
        .missing { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üêõ Skill Extraction Debug Test</h1>
        
        <div class="test-section">
            <h2>Test Resume Text</h2>
            <textarea id="resumeText" placeholder="Paste resume text here...">
John Doe
Software Engineer
Email: john.doe@email.com
Phone: +1-555-123-4567

TECHNICAL SKILLS:
‚Ä¢ Programming Languages: Python, JavaScript, Java, TypeScript
‚Ä¢ Frontend Frameworks: React, Angular, Vue.js
‚Ä¢ Backend Technologies: Node.js, Django, Flask, Express.js
‚Ä¢ Databases: PostgreSQL, MongoDB, Redis, MySQL
‚Ä¢ Cloud Platforms: AWS, Azure, Google Cloud
‚Ä¢ DevOps Tools: Docker, Kubernetes, Jenkins
‚Ä¢ Version Control: Git, GitHub
‚Ä¢ Areas of Technical Interest: Machine Learning, Deep Learning, LLMs, Data Visualization

PROFESSIONAL EXPERIENCE:
Senior Software Engineer | TechCorp Inc. | 2020 - Present
‚Ä¢ Developed scalable web applications using React and Node.js
‚Ä¢ Implemented machine learning models using Python and TensorFlow
‚Ä¢ Managed cloud infrastructure on AWS with Docker containers
‚Ä¢ Led a team of 5 developers in agile development practices

Software Developer | StartupXYZ | 2018 - 2020
‚Ä¢ Built REST APIs using Django and PostgreSQL
‚Ä¢ Created data visualization dashboards with Power BI
‚Ä¢ Worked with microservices architecture and Kubernetes
‚Ä¢ 3+ years of experience in full-stack development

EDUCATION:
Bachelor of Science in Computer Science
University of Technology (2014-2018)

CERTIFICATIONS:
‚Ä¢ AWS Certified Solutions Architect
‚Ä¢ Google Cloud Professional Developer
‚Ä¢ Scrum Master Certification
            </textarea>
            
            <button onclick="testSkillExtraction()">üß™ Test Skill Extraction</button>
            <button onclick="testAdvancedExtraction()">ü§ñ Test Advanced Extraction</button>
            <button onclick="clearResults()">üóëÔ∏è Clear Results</button>
        </div>

        <div id="results" class="test-section" style="display: none;">
            <h2>üìä Test Results</h2>
            <div id="resultsContent"></div>
        </div>
    </div>

    <script>
        async function testSkillExtraction() {
            const resumeText = document.getElementById('resumeText').value;
            const resultsDiv = document.getElementById('results');
            const resultsContent = document.getElementById('resultsContent');
            
            if (!resumeText.trim()) {
                alert('Please enter resume text');
                return;
            }

            resultsContent.innerHTML = '<div class="info">üîÑ Testing skill extraction...</div>';
            resultsDiv.style.display = 'block';

            try {
                const response = await fetch('/api/debug-skills', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ resumeText })
                });

                const result = await response.json();
                
                if (result.success) {
                    displayResults(result.debug, result.recommendations);
                } else {
                    resultsContent.innerHTML = `<div class="error">‚ùå Error: ${result.error}</div>`;
                }
            } catch (error) {
                resultsContent.innerHTML = `<div class="error">‚ùå Network Error: ${error.message}</div>`;
            }
        }

        async function testAdvancedExtraction() {
            const resumeText = document.getElementById('resumeText').value;
            const resultsDiv = document.getElementById('results');
            const resultsContent = document.getElementById('resultsContent');
            
            if (!resumeText.trim()) {
                alert('Please enter resume text');
                return;
            }

            resultsContent.innerHTML = '<div class="info">üîÑ Testing advanced extraction...</div>';
            resultsDiv.style.display = 'block';

            try {
                const response = await fetch('/api/extract-skills-advanced', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ resumeText })
                });

                const result = await response.json();
                
                if (result.success) {
                    displayAdvancedResults(result.data);
                } else {
                    resultsContent.innerHTML = `<div class="error">‚ùå Error: ${result.error}</div>`;
                }
            } catch (error) {
                resultsContent.innerHTML = `<div class="error">‚ùå Network Error: ${error.message}</div>`;
            }
        }

        function displayResults(debug, recommendations) {
            const html = `
                <div class="results">
                    <h3>üìÑ Text Analysis</h3>
                    <p><strong>Length:</strong> ${debug.textLength} characters</p>
                    <p><strong>Preview:</strong> ${debug.textPreview}...</p>
                </div>

                <div class="results">
                    <h3>üß™ Simple Regex Test</h3>
                    <p><strong>Found:</strong> ${debug.simpleRegexResults.count} skills</p>
                    <div class="skill-list">
                        ${debug.simpleRegexResults.found.map(skill => 
                            `<span class="skill-tag found">${skill}</span>`
                        ).join('')}
                    </div>
                </div>

                <div class="results">
                    <h3>üîç Case-Insensitive Test</h3>
                    <p><strong>Found:</strong> ${debug.includesResults.count} skills</p>
                    <div class="skill-list">
                        ${debug.includesResults.found.map(skill => 
                            `<span class="skill-tag found">${skill}</span>`
                        ).join('')}
                    </div>
                </div>

                <div class="results">
                    <h3>ü§ñ Advanced Extractor Test</h3>
                    <p><strong>Found:</strong> ${debug.advancedResults.count} skills</p>
                    <p><strong>Confidence:</strong> ${debug.advancedResults.confidence}%</p>
                    <div class="skill-list">
                        ${debug.advancedResults.skills.map(skill => 
                            `<span class="skill-tag found">${skill}</span>`
                        ).join('')}
                    </div>
                    
                    <h4>üìä Categorized Skills</h4>
                    <p><strong>Programming Languages:</strong> ${debug.advancedResults.programmingLanguages.join(', ') || 'None'}</p>
                    <p><strong>Frameworks:</strong> ${debug.advancedResults.frameworks.join(', ') || 'None'}</p>
                    <p><strong>Tools:</strong> ${debug.advancedResults.tools.join(', ') || 'None'}</p>
                </div>

                <div class="results">
                    <h3>üí° Recommendations</h3>
                    ${recommendations.map(rec => `<p>${rec}</p>`).join('')}
                </div>
            `;
            
            document.getElementById('resultsContent').innerHTML = html;
        }

        function displayAdvancedResults(data) {
            const html = `
                <div class="results">
                    <h3>ü§ñ Advanced Multi-Agent Extraction Results</h3>
                    <p><strong>Total Skills:</strong> ${data.skills.length}</p>
                    <p><strong>Confidence:</strong> ${data.confidence}%</p>
                    <p><strong>Method:</strong> ${data.extractionMethod}</p>
                    
                    <h4>üìä All Skills Found</h4>
                    <div class="skill-list">
                        ${data.skills.map(skill => 
                            `<span class="skill-tag found">${skill}</span>`
                        ).join('')}
                    </div>
                    
                    <h4>üîß Programming Languages</h4>
                    <div class="skill-list">
                        ${data.programmingLanguages.map(skill => 
                            `<span class="skill-tag found">${skill}</span>`
                        ).join('')}
                    </div>
                    
                    <h4>‚ö° Frameworks</h4>
                    <div class="skill-list">
                        ${data.frameworks.map(skill => 
                            `<span class="skill-tag found">${skill}</span>`
                        ).join('')}
                    </div>
                    
                    <h4>üõ†Ô∏è Tools</h4>
                    <div class="skill-list">
                        ${data.tools.map(skill => 
                            `<span class="skill-tag found">${skill}</span>`
                        ).join('')}
                    </div>
                    
                    <h4>üóÑÔ∏è Databases</h4>
                    <div class="skill-list">
                        ${data.databases.map(skill => 
                            `<span class="skill-tag found">${skill}</span>`
                        ).join('')}
                    </div>
                </div>
            `;
            
            document.getElementById('resultsContent').innerHTML = html;
        }

        function clearResults() {
            document.getElementById('results').style.display = 'none';
            document.getElementById('resultsContent').innerHTML = '';
        }
    </script>
</body>
</html>
